function getQuery(a) { var b = location.search.match(new RegExp(a + "=(.*?)($|&)", "i")); return b ? b[1] : !1 } function getQuery(a) { var b = location.search.match(new RegExp(a + "=(.*?)($|&)", "i")); return b ? b[1] : !1 } function SetShowHideSupportText() { $(".wizard-form input, .wizard-form textarea").focus(function () { $(this).closest(".field").find(".support-text").show() }), $(".wizard-form input, .wizard-form textarea").blur(function () { $(this).closest(".field").find(".support-text").hide() }) } !function (a) { a.fn.activate = function () { return this.filter(".filter").each(function () { a(this).addClass("on") }), this }, a.fn.activateToggle = function () { return this.filter(".filter").each(function () { a(this).toggleClass("on") }), this }, a.fn.deactivate = function () { return this.filter(".filter").each(function () { a(this).removeClass("on") }), this }, a.fn.isActive = function () { return this.hasClass("on") }, a.fn.getFilterId = function () { return this.attr("data-filter-id") }, a.fn.getByFilterId = function (a) { return this.filter('[data-filter-id="' + a + '"]') }, a.fn.getActive = function () { return this.filter(".filter.on") } }(jQuery); var SOL_filters = { settings: { cb_click_themes: function () { }, cb_click_beneficiaries: function () { }, cb_initialize: function () { } }, themes: [], beneficiaries: [], init: function (a) { SOL_filters.settings = $.extend({}, SOL_filters.settings, a), SOL_filters.themes = $('[data-filter-type="themes"]'), SOL_filters.beneficiaries = $('[data-filter-type="beneficiaries"]'), $("#browse .actions").on("click", '.filter[data-filter-type="themes"]', function (a) { a.preventDefault(), $(this).activateToggle(), SOL_filters.settings.cb_click_themes.apply(this) }), $("#browse .actions").on("click", '.filter[data-filter-type="beneficiaries"]', function (a) { a.preventDefault(), $(this).activateToggle(), SOL_filters.settings.cb_click_beneficiaries.apply(this) }), SOL_filters.settings.cb_initialize() }, get_active: function (a) { var b = []; switch (a) { case "themes": SOL_filters.themes.getActive().each(function () { b.push($(this).getFilterId()) }); break; case "beneficiaries": SOL_filters.beneficiaries.getActive().each(function () { b.push($(this).getFilterId()) }) } return b } }; $(function () { if (0 !== $("#browse").length) { var a = { api: { solutions: "/DesktopModules/NexsoServices/API/Nexso/GetSolutions", categories: "/DesktopModules/NexsoServices/API/Nexso/GetListCategory" }, base_path: window.location.protocol+"//" + window.location.host, language: $('input[name="CurrentLanguage"]').val() ? $('input[name="CurrentLanguage"]').val() : "en-US", uid: getQuery("ui") !== !1 ? $('input[name="CurrentUserId"]').val() : -1 }; Handlebars.registerHelper("i18n", function (b) { return "undefined" != typeof i18n[b] && "undefined" != typeof i18n[b][a.language] ? i18n[b][a.language] : b }), Handlebars.registerHelper("ucfirst", function (a) { return a = a.toLowerCase(), a.charAt(0).toUpperCase() + a.slice(1) }), Handlebars.registerHelper("is_draft", function (a, b) { return 800 > a ? b.fn(this) : b.inverse(this) }), async.waterfall([function (b) { $.get(a.api.categories, { Category: "Theme", Language: a.language }, function (a) { a = JSON.parse(a), b(null, a) }, "json").fail(function () { b(!0, null) }) }, function (b, c) { $.get(a.api.categories, { Category: "Beneficiaries", Language: a.language }, function (a) { a = JSON.parse(a), c(null, b, a) }, "json").fail(function () { c(!0, null) }) }, function (a, b, c) { var d = $("#tpl-browse").html(), e = Handlebars.compile(d), f = e({ themes: a, beneficiaries: b }); $("#browse").html(f); for (var g = $("#tpl-solution-placeholder").html(), h = 0; 3 > h; h++) $(".solution-grid").append(g); c(null, "done") }], function (b) { if (!b) { SOL_filters.init(); var c = function () { var b = this; this.page_size = 12, this.current_page = 1; var c = $("#tpl-solution").html(); this.template = Handlebars.compile(c), this.content_holder = $("#browse .solution-grid"), this.load_more_button = $("#show-more-trigger").click(function (a) { a.preventDefault(); var c = $(this); c.hasClass("disabled") || b.render_next() }), this.render = function (b) { b = "undefined" == typeof b; var c = this; b && c.reset(), $("#loading").addClass("on"), this.request_solutions(function (d) { if ($("#loading").removeClass("on"), b && c.content_holder.html(""), d.length) { var e = c.template({ solutions: d, curr_lang: a.language, base_path: a.base_path }); c.content_holder.append(e) } else c.load_more_button.addClass("disabled") }) }, this.reset = function () { this.current_page = 1, this.load_more_button.removeClass("disabled"), this.content_holder.html(""); for (var a = $("#tpl-solution-placeholder").html(), b = 0; 3 > b; b++) this.content_holder.append(a) }, this.render_next = function () { this.current_page++, this.render(!1) }, this.request_solutions = function (b) { var c = this; $.get(a.api.solutions, { language: a.language, rows: c.page_size, page: c.current_page, min: 0, max: 0, state: 1e3, categories: JSON.stringify(SOL_filters.get_active("themes")), beneficiaries: JSON.stringify(SOL_filters.get_active("beneficiaries")), userId: a.uid }, function (a) { a = JSON.parse(a), b(a) }, "json") } }, d = new c; d.render(), $(".filters-toggle").click(function (a) { a.stopPropagation(), a.preventDefault(); var b = $(this).siblings(".drop2"); $(".drop2").not(b).hide(), b.is(":hidden") ? (console.log("show"), b.show()) : (console.log("hide"), b.hide()) }), $(document).click(function (a) { 0 === $(a.target).closest(".drop2").length && $(".drop2").hide() }), $(".filters-apply").click(function (a) { a.preventDefault(), $(".drop2").hide(), d.render() }) } }) } }), $(function () { if (0 !== $("#latest_solutions").length) { var a = { api: { solutions: "/DesktopModules/NexsoServices/API/Nexso/GetSolutions" }, base_path: window.location.protocol+window.location.host, language: $('input[name="CurrentLanguage"]').val() ? $('input[name="CurrentLanguage"]').val() : "en-US", uid: getQuery("ui") !== !1 ? $('input[name="CurrentUserId"]').val() : -1 }; Handlebars.registerHelper("i18n", function (b) { return "undefined" != typeof i18n[b] && "undefined" != typeof i18n[b][a.language] ? i18n[b][a.language] : b }), Handlebars.registerHelper("ucfirst", function (a) { return a = a.toLowerCase(), a.charAt(0).toUpperCase() + a.slice(1) }), Handlebars.registerHelper("is_draft", function (a, b) { return 800 > a ? b.fn(this) : b.inverse(this) }); var b = $("#tpl-latest-solutions").html(), c = Handlebars.compile(b); $("#latest_solutions").append(c); var d = function () { var b = this; this.page_size = 6, this.current_page = 1; var c = $("#tpl-solution").html(); this.template = Handlebars.compile(c), this.content_holder = $("#latest_solutions .solution-grid"), this.load_more_button = $("#show-more-trigger").click(function (a) { a.preventDefault(); var c = $(this); c.hasClass("disabled") || b.render_next_avina() }), this.render_avina = function (b) { b = "undefined" == typeof b; var c = this; b && c.reset(), $("#loading").addClass("on"), this.request_solutions_avina(function (d) { if ($("#loading").removeClass("on"), b && c.content_holder.html(""), d.length) { var e = c.template({ solutions: d, curr_lang: a.language, base_path: a.base_path }); c.content_holder.append(e) } else c.load_more_button.addClass("disabled") }) }, this.reset = function () { this.current_page = 1, this.load_more_button.removeClass("disabled"), this.content_holder.html(""); for (var a = $("#tpl-solution-placeholder").html(), b = 0; 3 > b; b++) this.content_holder.append(a) }, this.render_next_avina = function () { this.current_page++, this.render_avina(!1) }, this.request_solutions_avina = function (c) { $.get(window.location.protocol + window.location.host + "/DesktopModules/NexsoServices/API/Nexso/GetSolutions", { language: a.language, rows: b.page_size, page: b.current_page, min: 0, max: 0, state: 1e3, userId: a.uid, filter: '[{"ChallengeReference":"AVINACITY2014"}]' }, function (a) { a = JSON.parse(a), c(a) }, "json") } }, e = new d; e.render_avina() } }), $(document).foundation(), $(document).ready(function () { if ($(".toggle").click(function (a) { a.stopPropagation(), a.preventDefault(), $(".drop").hide(); var b = $(this).siblings(".drop"); b.is(":hidden") ? b.show() : b.hide() }), $(".drop").click(function (a) { a.stopPropagation() }), $(document).click(function () { $(".drop").hide() }), smoothScroll.init(), $(".connect-wizard .btn, .solution-wizard .btn").parents("table").parent().attr("align", "center"), $(".front").length > 0) { var a = 220, b = 500; $(window).scroll(function () { $(this).scrollTop() > a ? $(".back-to-top").fadeIn(b) : $(".back-to-top").fadeOut(b) }), $(".back-to-top").click(function (a) { return a.preventDefault(), $("html, body").animate({ scrollTop: 0 }, b), !1 }) } $(".browse .filters a").click(function (a) { a.preventDefault(), $(this).toggleClass("active") }) }), window.smoothScroll = function (a, b, c) { "use strict"; var d = { speed: 500, easing: "easeInOutCubic", updateURL: !1, callbackBefore: function () { }, callbackAfter: function () { } }, e = function (a, b) { for (var c in b) a[c] = b[c]; return a }, f = function (a, b) { return "easeInQuad" == a ? b * b : "easeOutQuad" == a ? b * (2 - b) : "easeInOutQuad" == a ? .5 > b ? 2 * b * b : -1 + (4 - 2 * b) * b : "easeInCubic" == a ? b * b * b : "easeOutCubic" == a ? --b * b * b + 1 : "easeInOutCubic" == a ? .5 > b ? 4 * b * b * b : (b - 1) * (2 * b - 2) * (2 * b - 2) + 1 : "easeInQuart" == a ? b * b * b * b : "easeOutQuart" == a ? 1 - --b * b * b * b : "easeInOutQuart" == a ? .5 > b ? 8 * b * b * b * b : 1 - 8 * --b * b * b * b : "easeInQuint" == a ? b * b * b * b * b : "easeOutQuint" == a ? 1 + --b * b * b * b * b : "easeInOutQuint" == a ? .5 > b ? 16 * b * b * b * b * b : 1 + 16 * --b * b * b * b * b : b }, g = function (a, b) { var c = 0; if (a.offsetParent) do c += a.offsetTop, a = a.offsetParent; while (a); return c -= b, c >= 0 ? c : 0 }, h = function (a) { if (null === a || a === c) return {}; var b = {}; return a = a.split(";"), a.forEach(function (a) { a = a.trim(), "" !== a && (a = a.split(":"), b[a[0]] = a[1].trim()) }), b }, i = function (a, b) { b !== !0 && "true" !== b || !history.pushState || history.pushState({ pos: a.id }, "", a) }, j = function (c, j, k, l) { k = e(d, k || {}); var m, n, o, p = h(c ? c.getAttribute("data-options") : null), q = p.speed || k.speed, r = p.easing || k.easing, s = p.updateURL || k.updateURL, t = b.querySelector("[data-scroll-header]"), u = null === t ? 0 : t.offsetHeight + t.offsetTop, v = a.pageYOffset, w = g(b.querySelector(j), u), x = w - v, y = 0; c && "A" === c.tagName && l && l.preventDefault(), i(j, s); var z = function () { var c = a.pageYOffset; (o == w || c == w || a.innerHeight + c >= b.body.scrollHeight) && (clearInterval(m), k.callbackAfter()) }, A = function () { y += 16, n = y / q, n = n > 1 ? 1 : n, o = v + x * f(r, n), a.scrollTo(0, Math.floor(o)), z(o, w, m) }, B = function () { k.callbackBefore(), m = setInterval(A, 16) }; B() }, k = function (c) { if ("querySelector" in b && "addEventListener" in a && Array.prototype.forEach) { c = e(d, c || {}); var f = b.querySelectorAll("[data-scroll]"); Array.prototype.forEach.call(f, function (a) { a.addEventListener("click", j.bind(null, a, a.getAttribute("href"), c), !1) }) } }; return { init: k, animateScroll: j } }(window, document), function (a) { var b = { api: { sendMessage: window.location.protocol + window.location.host + "/DesktopModules/NexsoServices/API/Nexso/SendMessage" } }; a(function () { a("[data-modal-id]").click(function (b) { b.preventDefault(); var c = a(this).attr("data-modal-id"); a("#" + c).addClass("revealed") }), a(".modal").click(function (b) { b.target == b.currentTarget && a(this).removeClass("revealed") }), a("[data-modal-dismiss]").click(function (b) { b.preventDefault(), a(this).closest(".modal").removeClass("revealed") }) }), a(function () { var c = a("#conector-modal"), d = c.find("#status-message"), e = a("input#hfOwnerSolutionId").val() || null; c.appendTo("body"), a(".author-user [data-modal-id]").click(function (b) { b.preventDefault(); var e = a(".author-user h1.card-title span").text(); c.find("#message-recipient").text(e), d.removeClass("revealed status-message-success status-message-alert") }), c.find("[data-modal-confirm]").click(function (f) { f.preventDefault(); var g = a.trim(c.find("#message-body").val()); return "" == g ? void d.addClass("revealed status-message-alert").html(a("<p>").text("The message is empty.")) : (d.addClass("revealed").removeClass("status-message-success status-message-alert").html(a("<p>").text("Loading...")), void a.get(b.api.sendMessage, { userIdTo: e, Message: g }).done(function () { c.find("#message-body").val(""), d.addClass("status-message-success").html(a("<p>").text("Message sent.")) }).fail(function (b) { console.log("fail", b), d.addClass("status-message-alert").html(a("<p>").text("An error occurred while trying to send the message. Please try again.")) })) }) }) }($);
//# sourceMappingURL=nexso.min.js.map                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           